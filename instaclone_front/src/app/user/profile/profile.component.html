<div *ngIf="isUserDataLoaded" class="user-profile">

  <h1>Profile</h1>
  <div style="text-align: right">
    <button *ngIf="!isProfileOwner" mat-flat-button color="primary" (click)="startChat()">Start Chat</button>
  </div>
  <div *ngIf="isProfileOwner" style="text-align: right">
    <button mat-flat-button color="primary" (click)="openEditDialog()">Edit Info</button>
  </div>

  <div style="padding-top: 2rem" class="row">
    <div class="col">
      <img class="profile-image"
           [src]="previewImgURL || formatImage(userProfileImage) || 'https://static.vecteezy.com/system/resources/thumbnails/008/442/086/small_2x/illustration-of-human-icon-user-symbol-icon-modern-design-on-blank-background-free-vector.jpg'"
           alt="user image">

      <input type="file"
             style="display: none"
             #fileInput
             (change)="onFileSelected($event)">

      <div *ngIf="isProfileOwner">
        <button mat-button (click)="fileInput.click()">Pick File</button>
        <button mat-button *ngIf="selectedFile" (click)="onUpload()">Upload</button>
        <button mat-button *ngIf="hasProfileImage" (click)="deleteProfileImage()" [ngClass]="{'hover-red': true}">Delete Image</button>
      </div>
    </div>
    <div class="col" style="text-align: left">

      <h2>{{ user.username }}</h2>

      <h3 style="font-style: italic">{{ user.firstname }} {{ user.lastname }}</h3>
      <p>{{ user.bio }}</p>
    </div>

    <mat-divider style="margin: 2rem 0"></mat-divider>

    <div *ngIf="isProfileOwner">
      <router-outlet></router-outlet>
    </div>

  </div>

</div>
